@using UTS_SMS.Models
@model IEnumerable<UTS_SMS.Models.StudentComplaint>

<!-- Desktop View -->
<div class="hidden lg:block">
    <div class="overflow-x-auto">
        <table class="min-w-full divide-y divide-primary-100">
            <thead class="bg-neutral-50">
                <tr>
                    <th class="px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider w-1/3">Complaint</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider">Type</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider">Priority</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider">Status</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider">Reporter</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider">Date</th>
                </tr>
            </thead>
            <tbody class="bg-white divide-y divide-primary-100">
                @foreach (var complaint in Model)
                {
                    <tr class="hover:bg-neutral-50">
                        <td class="px-6 py-4 whitespace-normal break-words align-top">
                            <div>
                                <div class="text-sm font-medium text-primary-800">@complaint.ComplaintTitle</div>
                                <div class="text-sm text-neutral-500 break-words mt-1">@complaint.ComplaintDescription</div>
                            </div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap align-top">
                            <span class="inline-flex px-2 py-1 text-xs font-medium rounded-full bg-primary-100 text-primary-800">
                                @complaint.ComplaintType
                            </span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap align-top">
                            @{
                                var priorityClass = complaint.Priority switch
                                {
                                    "High" => "bg-error-light text-error",
                                    "Medium" => "bg-warning-light text-yellow-800",
                                    "Low" => "bg-success-light text-success",
                                    _ => "bg-neutral-100 text-primary-800"
                                };
                            }
                            <span class="inline-flex px-2 py-1 text-xs font-medium rounded-full @priorityClass">
                                @complaint.Priority
                            </span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap align-top">
                            @{
                                var statusClass = complaint.Status switch
                                {
                                    "Open" => "bg-warning-light text-yellow-800",
                                    "Resolved" => "bg-success-light text-success",
                                    "In Investigation" => "bg-primary-100 text-primary-800",
                                    _ => "bg-neutral-100 text-primary-800"
                                };
                            }
                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium @statusClass">
                                @if (complaint.Status == "Resolved")
                                {
                                    <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                                    </svg>
                                }
                                @complaint.Status
                            </span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap align-top">
                            @{
                                var reporterClass = complaint.ReporterType switch
                                {
                                    "Student" => "bg-success-light text-success",
                                    "Admin" => "bg-purple-100 text-purple-800",
                                    "Teacher" => "bg-orange-100 text-orange-800",
                                    _ => "bg-neutral-100 text-primary-800"
                                };
                            }
                            <span class="inline-flex px-2 py-1 text-xs font-medium rounded-full @reporterClass">
                                @complaint.ReporterType
                            </span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-primary-800 align-top">
                            @complaint.ComplaintDate.ToString("MMM dd, yyyy")
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

<!-- Mobile View -->
<div class="lg:hidden divide-y divide-primary-100">
    @foreach (var complaint in Model)
    {
        <div class="p-4">
            <div class="flex items-start justify-between mb-3">
                <div class="flex-1 min-w-0">
                    <h3 class="text-base font-medium text-primary-800 truncate">@complaint.ComplaintTitle</h3>
                    <p class="mt-1 text-sm text-neutral-600 break-words">@complaint.ComplaintDescription</p>
                </div>
                
                <div class="ml-3 flex-shrink-0">
                    @{
                        var mobileStatusClass = complaint.Status switch
                        {
                            "Open" => "bg-warning-light text-yellow-800",
                            "Resolved" => "bg-success-light text-success",
                            "In Investigation" => "bg-primary-100 text-primary-800",
                            _ => "bg-neutral-100 text-primary-800"
                        };
                    }
                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium @mobileStatusClass">
                        @if (complaint.Status == "Resolved")
                        {
                            <svg class="w-3 h-3 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                            </svg>
                        }
                        @complaint.Status
                    </span>
                </div>
            </div>
            
            <div class="flex flex-wrap items-center justify-between text-xs text-neutral-500 gap-2">
                <div class="flex flex-wrap gap-2">
                    <span class="inline-flex px-2 py-1 rounded-full bg-primary-100 text-primary-800">
                        @complaint.ComplaintType
                    </span>
                    @{
                        var mobilePriorityClass = complaint.Priority switch
                        {
                            "High" => "bg-error-light text-error",
                            "Medium" => "bg-warning-light text-yellow-800",
                            "Low" => "bg-success-light text-success",
                            _ => "bg-neutral-100 text-primary-800"
                        };
                        var mobileReporterClass = complaint.ReporterType switch
                        {
                            "Student" => "bg-success-light text-success",
                            "Admin" => "bg-purple-100 text-purple-800",
                            "Teacher" => "bg-orange-100 text-orange-800",
                            _ => "bg-neutral-100 text-primary-800"
                        };
                    }
                    <span class="inline-flex px-2 py-1 rounded-full @mobilePriorityClass">
                        @complaint.Priority
                    </span>
                    <span class="inline-flex px-2 py-1 rounded-full @mobileReporterClass">
                        @complaint.ReporterType
                    </span>
                </div>
                <div class="text-neutral-500 whitespace-nowrap">
                    @complaint.ComplaintDate.ToString("MMM dd")
                </div>
            </div>
        </div>
    }
</div>
