@model IEnumerable<SMS.Models.Chapter>

@{
    ViewData["Title"] = "Chapters";
    var subject = ViewBag.Subject as SMS.Models.Subject;
    var classEntity = ViewBag.Class as SMS.Models.Class;
}

<div class="min-h-screen bg-gradient-subtle p-4 md:p-6">
    <div class="max-w-7xl mx-auto">
        <!-- Header -->
        <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-8">
            <div>
                <h1 class="text-3xl font-bold text-primary-800">üìë Chapters - @subject.Name</h1>
                <p class="text-neutral-600 mt-2">@classEntity.Name</p>
            </div>
            <div class="flex space-x-2 mt-4 md:mt-0">
                <a href="@Url.Action("Subjects", new { id = classEntity.Id })" class="bg-neutral-200 hover:bg-neutral-300 text-neutral-700 px-4 py-2 rounded-lg">
                    ‚Üê Back
                </a>
                <a href="@Url.Action("Create", new { subjectId = subject.Id, classId = classEntity.Id })" class="bg-gradient-primary hover:bg-primary-700 text-white px-4 py-2 rounded-lg">
                    + Add Chapter
                </a>
            </div>
        </div>

        <!-- Success Message -->
        @if (TempData["SuccessMessage"] != null)
        {
            <div class="bg-success-light border-l-4 border-success text-success p-4 mb-6 rounded-xl">
                @TempData["SuccessMessage"]
            </div>
        }

        <!-- Chapters List -->
        <div class="space-y-4">
            @foreach (var chapter in Model)
            {
                <div class="bg-white rounded-2xl shadow-sms-xl p-6 hover:shadow-2xl transition-all">
                    <div class="flex items-start justify-between">
                        <div class="flex-1">
                            <div class="flex items-center mb-2">
                                <span class="bg-primary-100 text-primary-700 px-3 py-1 rounded-full text-sm font-semibold mr-3">
                                    Chapter @chapter.ChapterNumber
                                </span>
                                <h3 class="text-xl font-bold text-primary-800">@chapter.Name</h3>
                            </div>
                            @if (!string.IsNullOrEmpty(chapter.Description))
                            {
                                <p class="text-neutral-600 mt-2">@chapter.Description</p>
                            }
                            <div class="mt-3 text-sm text-neutral-500">
                                Created by @chapter.CreatedBy on @chapter.CreatedAt.ToString("MMM dd, yyyy")
                            </div>
                        </div>
                        <div class="flex space-x-2 ml-4">
                            <a href="@Url.Action("Edit", new { id = chapter.Id, classId = classEntity.Id })" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg">
                                ‚úèÔ∏è Edit
                            </a>
                            <form method="post" asp-action="Delete" asp-route-id="@chapter.Id" asp-route-subjectId="@subject.Id" asp-route-classId="@classEntity.Id" class="inline" onsubmit="return confirm('Are you sure you want to delete this chapter?');">
                                @Html.AntiForgeryToken()
                                <button type="submit" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg">
                                    üóëÔ∏è Delete
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            }
        </div>

        @if (!Model.Any())
        {
            <div class="bg-white rounded-2xl shadow-sms-xl p-12 text-center">
                <div class="text-6xl mb-4">üìë</div>
                <h3 class="text-xl font-semibold text-neutral-700 mb-2">No Chapters Yet</h3>
                <p class="text-neutral-600 mb-6">Start by creating your first chapter.</p>
                <a href="@Url.Action("Create", new { subjectId = subject.Id, classId = classEntity.Id })" class="bg-gradient-primary hover:bg-primary-700 text-white px-6 py-3 rounded-lg inline-block">
                    + Create First Chapter
                </a>
            </div>
        }
    </div>
</div>
