@using UTS_SMS.Models
@model UTS_SMS.ViewModels.DashboardViewModel

@{
    ViewData["Title"] = "Admin Dashboard";
}

<!-- Modern HR Dashboard with Gradient Background -->
<div class="min-h-screen" style="background: linear-gradient(180deg, #F5F1E8 0%, #FFF9E6 100%);">
    <div class="max-w-[1400px] mx-auto p-6">
        
        <!-- Dark Pill-Shaped Navigation Bar -->
        <div class="bg-[#2D2D2D] rounded-full shadow-lg p-2 mb-8 flex items-center justify-between">
            <div class="flex items-center gap-2">
                <button class="nav-item active px-6 py-3 rounded-full text-white text-sm font-medium transition-all">Dashboard</button>
                <button class="nav-item px-6 py-3 rounded-full text-white text-sm font-medium hover:bg-[#1a1a1a] transition-all">People</button>
                <button class="nav-item px-6 py-3 rounded-full text-white text-sm font-medium hover:bg-[#1a1a1a] transition-all">Hiring</button>
                <button class="nav-item px-6 py-3 rounded-full text-white text-sm font-medium hover:bg-[#1a1a1a] transition-all">Devices</button>
                <button class="nav-item px-6 py-3 rounded-full text-white text-sm font-medium hover:bg-[#1a1a1a] transition-all">Apps</button>
                <button class="nav-item px-6 py-3 rounded-full text-white text-sm font-medium hover:bg-[#1a1a1a] transition-all">Salary</button>
                <button class="nav-item px-6 py-3 rounded-full text-white text-sm font-medium hover:bg-[#1a1a1a] transition-all">Calendar</button>
                <button class="nav-item px-6 py-3 rounded-full text-white text-sm font-medium hover:bg-[#1a1a1a] transition-all">Reviews</button>
            </div>
            <div class="flex items-center gap-3 pr-2">
                <button class="w-10 h-10 rounded-full flex items-center justify-center text-white hover:bg-[#1a1a1a] transition-all">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                    </svg>
                </button>
                <button class="w-10 h-10 rounded-full flex items-center justify-center text-white hover:bg-[#1a1a1a] transition-all">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"></path>
                    </svg>
                </button>
                <button class="w-10 h-10 rounded-full bg-[#FFD700] flex items-center justify-center text-[#2D2D2D] hover:bg-[#FFC700] transition-all">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Welcome Section -->
        <div class="bg-white/80 backdrop-blur-md rounded-3xl shadow-lg p-8 mb-6">
            <div class="flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4">
                <div>
                    <div class="flex items-center gap-3 mb-2">
                        <div class="w-14 h-14 rounded-xl bg-accent-primary flex items-center justify-center shadow-md">
                            <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"></path>
                            </svg>
                        </div>
                        <h1 class="text-3xl lg:text-4xl font-bold text-gray-900">
                            @(Model.IsOwnerDashboard ? "Owner Dashboard" : "Admin Dashboard")
                        </h1>
                    </div>
                    <p class="text-gray-500 text-sm font-medium pl-14">Real-time analytics and insights â€¢ @DateTime.Now.ToString("MMMM dd, yyyy")</p>
                </div>

                @if (Model.IsOwnerDashboard && Model.Campuses.Any())
                {
                    <div class="flex items-center gap-3 bg-gray-50 px-5 py-3 rounded-xl shadow-sm border border-gray-200">
                        <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
                        </svg>
                        <label class="text-sm font-semibold text-gray-700">Campus: </label>
                        <select id="campusSelector" class="px-4 py-2 border-2 border-gray-200 rounded-lg bg-white text-gray-700 text-sm font-semibold focus:ring-2 focus:ring-accent-primary focus:border-accent-primary transition-all cursor-pointer">
                            <option value="">All Campuses</option>
                            @foreach (var campus in Model.Campuses)
                            {
                                <option value="@campus.Id" selected="@(Model.SelectedCampusId == campus.Id)">@campus.Name</option>
                            }
                        </select>
                    </div>
                }
            </div>
        </div>

        <!-- CREXTIO KPI Cards with Mustard Yellow Accent -->
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-5 mb-6">
            <!-- Students Card - CREXTIO Blue with Mustard Accent -->
            <div class="group relative overflow-hidden bg-white rounded-3xl shadow-md hover:shadow-lg p-6 transform hover:scale-105 transition-all duration-300 cursor-pointer border border-gray-100" onclick="navigateToSection('/Students/Index')">
                <div class="absolute top-0 right-0 w-32 h-32 bg-blue-50 rounded-full -mr-16 -mt-16 opacity-50"></div>
                <div class="relative z-10">
                    <div class="flex items-center justify-between mb-4">
                        <div class="w-14 h-14 bg-blue-100 rounded-xl flex items-center justify-center">
                            <svg class="w-7 h-7 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"></path>
                            </svg>
                        </div>
                        <div class="w-8 h-8 bg-accent-primary/10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-accent-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M9 5l7 7-7 7"></path></svg>
                        </div>
                    </div>
                    <h3 class="text-xs font-bold text-gray-500 uppercase tracking-wider mb-2">Total Students</h3>
                    <p class="text-4xl font-bold text-gray-900 mb-2">@Model.TotalStudents</p>
                    <div class="flex items-center gap-2 text-gray-600">
                        <span class="text-xs font-semibold bg-green-100 text-green-700 px-2 py-1 rounded-full">Active</span>
                        <span class="text-xs font-medium">View details â†’</span>
                    </div>
                </div>
            </div>

            <!-- Teachers Card - CREXTIO Mustard Yellow -->
            <div class="group relative overflow-hidden bg-accent-primary rounded-3xl shadow-md hover:shadow-lg p-6 transform hover:scale-105 transition-all duration-300 cursor-pointer" onclick="navigateToSection('/Employees/Index')">
                <div class="absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16"></div>
                <div class="relative z-10">
                    <div class="flex items-center justify-between mb-4">
                        <div class="w-14 h-14 bg-white/20 rounded-xl flex items-center justify-center">
                            <svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                            </svg>
                        </div>
                        <div class="w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M9 5l7 7-7 7"></path></svg>
                        </div>
                    </div>
                    <h3 class="text-xs font-bold text-white/80 uppercase tracking-wider mb-2">Total Teachers</h3>
                    <p class="text-4xl font-bold text-white mb-2">@Model.TotalTeachers</p>
                    <div class="flex items-center gap-2 text-white">
                        <span class="text-xs font-semibold bg-white/20 px-2 py-1 rounded-full">Active</span>
                        <span class="text-xs font-medium">View details â†’</span>
                    </div>
                </div>
            </div>

            <!-- Revenue Card - Success Green -->
            <div class="group relative overflow-hidden bg-white rounded-3xl shadow-md hover:shadow-lg p-6 transform hover:scale-105 transition-all duration-300 cursor-pointer border border-gray-100" onclick="navigateToSection('/BillingReports/Index')">
                <div class="absolute top-0 right-0 w-32 h-32 bg-green-50 rounded-full -mr-16 -mt-16 opacity-50"></div>
                <div class="relative z-10">
                    <div class="flex items-center justify-between mb-4">
                        <div class="w-14 h-14 bg-green-100 rounded-xl flex items-center justify-center">
                            <svg class="w-7 h-7 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"></path>
                            </svg>
                        </div>
                        <div class="text-right">
                            <div class="text-xs font-bold text-green-700 uppercase tracking-wider">+@Model.FinancialSummary.RevenuePercentage%</div>
                            <div class="text-xs text-gray-500">vs target</div>
                        </div>
                    </div>
                    <h3 class="text-xs font-bold text-gray-500 uppercase tracking-wider mb-2">Monthly Revenue</h3>
                    <p class="text-3xl font-bold text-gray-900 mb-2">@Model.FinancialSummary.MonthlyRevenueActual.ToString("C")</p>
                    <div class="flex items-center gap-2 text-green-600">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path></svg>
                        <span class="text-xs font-medium">Trending up</span>
                    </div>
                </div>
            </div>

            <!-- Profit/Loss Card - Mustard Accent -->
            <div class="group relative overflow-hidden bg-white rounded-3xl shadow-md hover:shadow-lg p-6 transform hover:scale-105 transition-all duration-300 cursor-pointer border border-accent-primary/20" onclick="navigateToSection('/BillingReports')">
                <div class="absolute top-0 right-0 w-32 h-32 bg-accent-light rounded-full -mr-16 -mt-16 opacity-50"></div>
                <div class="relative z-10">
                    <div class="flex items-center justify-between mb-4">
                        <div class="w-14 h-14 bg-accent-light rounded-xl flex items-center justify-center">
                            <svg class="w-7 h-7 text-accent-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                @if (Model.FinancialSummary.ProfitLoss >= 0)
                                {
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path>
                                }
                                else
                                {
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"></path>
                                }
                            </svg>
                        </div>
                        <div class="text-right">
                            <div class="text-xs font-bold text-accent-primary uppercase tracking-wider">@Model.FinancialSummary.ProfitLossPercentage%</div>
                            <div class="text-xs text-gray-500">margin</div>
                        </div>
                    </div>
                    <h3 class="text-xs font-bold text-gray-500 uppercase tracking-wider mb-2">Net Profit/Loss</h3>
                    <p class="text-3xl font-bold text-gray-900 mb-2">@Model.FinancialSummary.ProfitLoss.ToString("C")</p>
                    <div class="flex items-center gap-2 text-gray-600">
                        <span class="text-xs font-semibold bg-accent-light text-accent-primary px-2 py-1 rounded-full">This Month</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modern Tabbed Interface -->
        <div class="backdrop-blur-xl bg-white/80 rounded-2xl shadow-sms-xl overflow-hidden border border-white/40">
            <!-- Tab Navigation with Modern Design -->
            <div class="border-b-2 border-primary-100/50 bg-gradient-to-r from-primary-50/50 to-transparent backdrop-blur-sm">
                <nav class="flex overflow-x-auto scrollbar-hide" aria-label="Tabs">
                    <button onclick="switchTab('overview')" class="tab-button active group px-6 py-4 text-sm font-bold border-b-4 border-primary-600 text-primary-800 whitespace-nowrap transition-all hover:bg-white/60 relative overflow-hidden">
                        <span class="absolute inset-0 bg-gradient-primary opacity-0 group-hover:opacity-10 transition-opacity"></span>
                        <span class="relative flex items-center gap-2">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"></path>
                            </svg>
                            Overview
                        </span>
                    </button>
                    <button onclick="switchTab('attendance')" class="tab-button group px-6 py-4 text-sm font-bold border-b-4 border-transparent text-neutral-600 hover:text-primary-700 hover:bg-white/60 whitespace-nowrap transition-all relative overflow-hidden">
                        <span class="absolute inset-0 bg-gradient-primary opacity-0 group-hover: opacity-10 transition-opacity"></span>
                        <span class="relative flex items-center gap-2">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                            Attendance
                        </span>
                    </button>
                    <button onclick="switchTab('finance')" class="tab-button group px-6 py-4 text-sm font-bold border-b-4 border-transparent text-neutral-600 hover:text-primary-700 hover:bg-white/60 whitespace-nowrap transition-all relative overflow-hidden">
                        <span class="absolute inset-0 bg-gradient-primary opacity-0 group-hover:opacity-10 transition-opacity"></span>
                        <span class="relative flex items-center gap-2">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"></path>
                            </svg>
                            Finance
                        </span>
                    </button>
                    <button onclick="switchTab('academics')" class="tab-button group px-6 py-4 text-sm font-bold border-b-4 border-transparent text-neutral-600 hover:text-primary-700 hover:bg-white/60 whitespace-nowrap transition-all relative overflow-hidden">
                        <span class="absolute inset-0 bg-gradient-primary opacity-0 group-hover:opacity-10 transition-opacity"></span>
                        <span class="relative flex items-center gap-2">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                            </svg>
                            Academics
                        </span>
                    </button>
                    <button onclick="switchTab('operations')" class="tab-button group px-6 py-4 text-sm font-bold border-b-4 border-transparent text-neutral-600 hover:text-primary-700 hover:bg-white/60 whitespace-nowrap transition-all relative overflow-hidden">
                        <span class="absolute inset-0 bg-gradient-primary opacity-0 group-hover:opacity-10 transition-opacity"></span>
                        <span class="relative flex items-center gap-2">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                            </svg>
                            Operations
                        </span>
                    </button>
                </nav>
            </div>

            <!-- Tab Content with Enhanced Styling -->
            <div class="p-6 lg:p-8">
                <!-- Overview Tab -->
                <div id="overview-tab" class="tab-content">
                    <div class="grid grid-cols-1 xl:grid-cols-3 gap-6 mb-6">
                        <!-- Quick Stats Grid -->
                        <div class="xl:col-span-2 grid grid-cols-1 sm:grid-cols-2 gap-5">
                            <div class="backdrop-blur-md bg-gradient-to-br from-white/90 to-white/60 rounded-xl p-5 border border-white/60 shadow-sms-md hover:shadow-sms-lg transition-all hover:-translate-y-1 duration-300">
                                <div class="flex items-center justify-between mb-3">
                                    <span class="text-sm font-bold text-primary-800">Student Attendance</span>
                                    <div class="w-10 h-10 rounded-xl bg-gradient-accent flex items-center justify-center shadow-sms-gold">
                                        <svg class="w-5 h-5 text-primary-900" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                        </svg>
                                    </div>
                                </div>
                                <p class="text-4xl font-black bg-gradient-to-r from-info to-info-dark bg-clip-text text-transparent mb-2">@Model.AttendanceSummary.StudentAttendancePercentage%</p>
                                <p class="text-xs text-neutral-600 font-semibold">@Model.AttendanceSummary.TotalStudentsPresent/@(Model.AttendanceSummary.TotalStudentsPresent + Model.AttendanceSummary.TotalStudentsAbsent) present today</p>
                            </div>

                            <div class="backdrop-blur-md bg-gradient-to-br from-white/90 to-white/60 rounded-xl p-5 border border-white/60 shadow-sms-md hover:shadow-sms-lg transition-all hover:-translate-y-1 duration-300">
                                <div class="flex items-center justify-between mb-3">
                                    <span class="text-sm font-bold text-primary-800">Teacher Attendance</span>
                                    <div class="w-10 h-10 rounded-xl bg-gradient-accent flex items-center justify-center shadow-sms-gold">
                                        <svg class="w-5 h-5 text-primary-900" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                                        </svg>
                                    </div>
                                </div>
                                <p class="text-4xl font-black bg-gradient-to-r from-success to-success-dark bg-clip-text text-transparent mb-2">@Model.AttendanceSummary.TeacherAttendancePercentage%</p>
                                <p class="text-xs text-neutral-600 font-semibold">@Model.AttendanceSummary.TotalTeachersPresent/@(Model.AttendanceSummary.TotalTeachersPresent + Model.AttendanceSummary.TotalTeachersAbsent) present today</p>
                            </div>

                            <div class="backdrop-blur-md bg-gradient-to-br from-white/90 to-white/60 rounded-xl p-5 border border-white/60 shadow-sms-md hover:shadow-sms-lg transition-all hover:-translate-y-1 duration-300">
                                <div class="flex items-center justify-between mb-3">
                                    <span class="text-sm font-bold text-primary-800">Exam Pass Rate</span>
                                    <div class="w-10 h-10 rounded-xl bg-gradient-accent flex items-center justify-center shadow-sms-gold">
                                        <svg class="w-5 h-5 text-primary-900" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                                        </svg>
                                    </div>
                                </div>
                                <p class="text-4xl font-black bg-gradient-to-r from-success to-success-dark bg-clip-text text-transparent mb-2">@Model.ExamSummary.OverallPassPercentage%</p>
                                <p class="text-xs text-neutral-600 font-semibold">@Model.ExamSummary.PassedStudents/@Model.ExamSummary.TotalStudentExamEntries students passed</p>
                            </div>

                            <div class="backdrop-blur-md bg-gradient-to-br from-white/90 to-white/60 rounded-xl p-5 border border-white/60 shadow-sms-md hover:shadow-sms-lg transition-all hover:-translate-y-1 duration-300">
                                <div class="flex items-center justify-between mb-3">
                                    <span class="text-sm font-bold text-primary-800">Pending Complaints</span>
                                    <div class="w-10 h-10 rounded-xl bg-gradient-accent flex items-center justify-center shadow-sms-gold">
                                        <svg class="w-5 h-5 text-primary-900" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                        </svg>
                                    </div>
                                </div>
                                <p class="text-4xl font-black bg-gradient-to-r from-warning to-warning-dark bg-clip-text text-transparent mb-2">@Model.ComplaintSummary.TotalPendingComplaints</p>
                                <p class="text-xs text-neutral-600 font-semibold">@Model.ComplaintSummary.EscalatedComplaints escalated cases</p>
                            </div>
                        </div>

                        <!-- Teacher of the Month -->
                        @if (Model.TeacherOfMonth != null)
                        {
                            <div class="relative overflow-hidden bg-gradient-gold rounded-2xl p-6 border-2 border-accent-500/50 shadow-sms-gold cursor-pointer transform hover:scale-105 transition-all duration-500 backdrop-blur-sm" onclick="navigateToSection('/TeacherPerformance')">
                                <div class="absolute top-0 right-0 w-40 h-40 bg-white/10 rounded-full -mr-20 -mt-20"></div>
                                <div class="absolute bottom-0 left-0 w-32 h-32 bg-primary-900/10 rounded-full -ml-16 -mb-16"></div>
                                <div class="relative z-10">
                                    <div class="flex items-center mb-4">
                                        <svg class="w-8 h-8 text-primary-900 mr-2" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"/>
                                        </svg>
                                        <h3 class="text-lg font-black text-primary-900">Teacher of the Month</h3>
                                    </div>
                                    <div class="text-center">
                                        <div class="w-24 h-24 bg-white/40 backdrop-blur-md rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-xl border-2 border-white/60">
                                            <svg class="w-12 h-12 text-primary-900" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                                            </svg>
                                        </div>
                                        <h4 class="text-2xl font-black text-primary-900 mb-3">@Model.TeacherOfMonth.Teacher.FullName</h4>
                                        <div class="inline-block bg-white/40 backdrop-blur-md rounded-xl px-6 py-3 mb-4 border-2 border-white/60">
                                            <div class="text-4xl font-black text-primary-900">@Model.TeacherOfMonth.Score.ToString("F1")<span class="text-xl">/20.0</span></div>
                                            <p class="text-xs text-primary-800 font-bold mt-1">Performance Score</p>
                                        </div>
                                        <div class="text-sm text-primary-900 bg-white/30 backdrop-blur-sm rounded-xl p-4 font-medium border border-white/40">
                                            @Model.TeacherOfMonth.Achievements
                                        </div>
                                    </div>
                                </div>
                            </div>
                        }
                
                    </div>

                    <!-- Recent Activities with Modern Cards -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <!-- Recent Fee Collections -->
                        <div class="backdrop-blur-md bg-gradient-to-br from-white/90 to-white/70 rounded-2xl p-6 border border-white/60 shadow-sms-md">
                            <div class="flex items-center justify-between mb-5">
                                <div class="flex items-center gap-3">
                                    <div class="w-10 h-10 rounded-xl bg-gradient-primary flex items-center justify-center shadow-md">
                                        <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"></path>
                                        </svg>
                                    </div>
                                    <h3 class="text-lg font-black text-primary-800">Recent Fee Collections</h3>
                                </div>
                                <a href="/Billing" class="text-primary-600 hover:text-primary-800 text-sm font-bold flex items-center gap-1 transition-colors hover:gap-2">
                                    View all 
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M9 5l7 7-7 7"></path></svg>
                                </a>
                            </div>
                            <div class="space-y-3 max-h-64 overflow-y-auto custom-scrollbar">
                                @foreach (var fee in Model.RecentFees.Take(5))
                                {
                                    <div class="group flex items-center justify-between bg-white/80 backdrop-blur-sm rounded-xl p-4 hover:shadow-md transition-all border border-primary-100/50 hover:border-success/30 hover:-translate-y-0.5 duration-200">
                                        <div class="flex items-center">
                                            <div class="w-12 h-12 bg-gradient-to-br from-success to-success-dark rounded-xl flex items-center justify-center text-white font-black text-base mr-3 shadow-md group-hover:scale-110 transition-transform">
                                                @fee.BillingMaster.Student.StudentName?.Substring(0, 1)
                                            </div>
                                            <div>
                                                <p class="font-bold text-primary-800 text-sm">@fee.BillingMaster.Student.StudentName</p>
                                                <p class="text-xs text-neutral-600 font-medium">@fee.PaymentDate.ToString("MMM dd, yyyy")</p>
                                            </div>
                                        </div>
                                        <div class="text-right">
                                            <p class="font-black text-success text-base">@fee.AmountPaid.ToString("C")</p>
                                            <span class="inline-block text-xs font-semibold bg-success/10 text-success px-2 py-1 rounded-md">@(fee.CashPaid > 0 ? "Cash" : "Online")</span>
                                        </div>
                                    </div>
                                }
                            </div>
                        </div>

                        <!-- Recent Payroll -->
                        <div class="backdrop-blur-md bg-gradient-to-br from-white/90 to-white/70 rounded-2xl p-6 border border-white/60 shadow-sms-md">
                            <div class="flex items-center justify-between mb-5">
                                <div class="flex items-center gap-3">
                                    <div class="w-10 h-10 rounded-xl bg-gradient-primary flex items-center justify-center shadow-md">
                                        <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"></path>
                                        </svg>
                                    </div>
                                    <h3 class="text-lg font-black text-primary-800">Recent Payroll</h3>
                                </div>
                                <a href="/Payroll" class="text-primary-600 hover:text-primary-800 text-sm font-bold flex items-center gap-1 transition-colors hover:gap-2">
                                    View all 
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M9 5l7 7-7 7"></path></svg>
                                </a>
                            </div>
                            <div class="space-y-3 max-h-64 overflow-y-auto custom-scrollbar">
                                @foreach (var payroll in Model.RecentPayroll.Take(5))
                                {
                                    <div class="group flex items-center justify-between bg-white/80 backdrop-blur-sm rounded-xl p-4 hover:shadow-md transition-all border border-primary-100/50 hover:border-info/30 hover:-translate-y-0.5 duration-200">
                                        <div class="flex items-center">
                                            <div class="w-12 h-12 bg-gradient-primary rounded-xl flex items-center justify-center text-white font-black text-base mr-3 shadow-md group-hover:scale-110 transition-transform">
                                                @payroll.PayrollMaster.Employee.FullName?.Substring(0, 1)
                                            </div>
                                            <div>
                                                <p class="font-bold text-primary-800 text-sm">@payroll.PayrollMaster.Employee.FullName</p>
                                                <p class="text-xs text-neutral-600 font-medium">@payroll.PaymentDate.ToString("MMM dd, yyyy")</p>
                                            </div>
                                        </div>
                                        <div class="text-right">
                                            <p class="font-black text-info text-base">@payroll.AmountPaid.ToString("C")</p>
                                            <span class="inline-block text-xs font-semibold bg-info/10 text-info px-2 py-1 rounded-md">@(payroll.CashPaid > 0 ? "Cash" : "Online")</span>
                                        </div>
                                    </div>
                                }
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Attendance Tab -->
                <div id="attendance-tab" class="tab-content hidden">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <!-- Student Attendance Chart -->
                        <div class="backdrop-blur-md bg-gradient-to-br from-white/90 to-white/70 rounded-2xl p-6 border border-white/60 shadow-sms-md">
                            <h3 class="text-lg font-black text-primary-800 mb-5 flex items-center gap-2">
                                <div class="w-8 h-8 rounded-lg bg-gradient-to-br from-info to-info-dark flex items-center justify-center">
                                    <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                                </div>
                                Student Attendance Distribution
                            </h3>
                            <div class="bg-white/80 backdrop-blur-sm rounded-xl p-6 h-72 border border-primary-100/50 shadow-inner">
                                <canvas id="studentAttendanceChart"></canvas>
                            </div>
                            <div class="mt-5 grid grid-cols-2 gap-4">
                                <div class="bg-white/80 backdrop-blur-sm rounded-xl p-4 text-center border-2 border-success/50 shadow-sm hover:shadow-md transition-all">
                                    <p class="text-3xl font-black text-success">@Model.AttendanceSummary.TotalStudentsPresent</p>
                                    <p class="text-xs text-neutral-600 font-bold mt-1">Present</p>
                                </div>
                                <div class="bg-white/80 backdrop-blur-sm rounded-xl p-4 text-center border-2 border-error/50 shadow-sm hover: shadow-md transition-all">
                                    <p class="text-3xl font-black text-error">@Model.AttendanceSummary.TotalStudentsAbsent</p>
                                    <p class="text-xs text-neutral-600 font-bold mt-1">Absent</p>
                                </div>
                            </div>
                            <button onclick="navigateToSection('/Attendance')" class="mt-5 w-full bg-gradient-primary hover:shadow-sms-lg text-white py-3 px-4 rounded-xl font-bold text-sm transition-all transform hover:scale-105 flex items-center justify-center gap-2">
                                View Detailed Report 
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M13 7l5 5m0 0l-5 5m5-5H6"></path></svg>
                            </button>
                        </div>

                        <!-- Teacher Attendance Chart -->
                        <div class="backdrop-blur-md bg-gradient-to-br from-white/90 to-white/70 rounded-2xl p-6 border border-white/60 shadow-sms-md">
                            <h3 class="text-lg font-black text-primary-800 mb-5 flex items-center gap-2">
                                <div class="w-8 h-8 rounded-lg bg-gradient-primary flex items-center justify-center">
                                    <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg>
                                </div>
                                Teacher Attendance Distribution
                            </h3>
                            <div class="bg-white/80 backdrop-blur-sm rounded-xl p-6 h-72 border border-primary-100/50 shadow-inner">
                                <canvas id="teacherAttendanceChart"></canvas>
                            </div>
                            <div class="mt-5 grid grid-cols-2 gap-4">
                                <div class="bg-white/80 backdrop-blur-sm rounded-xl p-4 text-center border-2 border-success/50 shadow-sm hover:shadow-md transition-all">
                                    <p class="text-3xl font-black text-success">@Model.AttendanceSummary.TotalTeachersPresent</p>
                                    <p class="text-xs text-neutral-600 font-bold mt-1">Present</p>
                                </div>
                                <div class="bg-white/80 backdrop-blur-sm rounded-xl p-4 text-center border-2 border-error/50 shadow-sm hover:shadow-md transition-all">
                                    <p class="text-3xl font-black text-error">@Model.AttendanceSummary.TotalTeachersAbsent</p>
                                    <p class="text-xs text-neutral-600 font-bold mt-1">Absent</p>
                                </div>
                            </div>
                            <button onclick="navigateToSection('/EmployeeAttendance')" class="mt-5 w-full bg-gradient-primary hover:shadow-sms-lg text-white py-3 px-4 rounded-xl font-bold text-sm transition-all transform hover:scale-105 flex items-center justify-center gap-2">
                                View Detailed Report 
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M13 7l5 5m0 0l-5 5m5-5H6"></path></svg>
                            </button>
                        </div>
                    </div>

                    <!-- Namaz Attendance -->
                    <div class="mt-6 backdrop-blur-md bg-gradient-to-br from-white/90 to-white/70 rounded-2xl p-6 border border-white/60 shadow-sms-md">
                        <div class="flex items-center justify-between mb-5">
                            <h3 class="text-lg font-black text-primary-800 flex items-center gap-2">
                                <div class="w-8 h-8 rounded-lg bg-gradient-accent flex items-center justify-center">
                                    <svg class="w-4 h-4 text-primary-900" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path></svg>
                                </div>
                                Namaz Attendance Today
                            </h3>
                            <button onclick="navigateToSection('/NamazAttendance')" class="text-primary-600 hover:text-primary-800 text-sm font-bold flex items-center gap-1 transition-colors hover: gap-2">
                                View Details 
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M9 5l7 7-7 7"></path></svg>
                            </button>
                        </div>
                        <div class="grid grid-cols-1 sm:grid-cols-3 gap-5">
                            <div class="bg-white/80 backdrop-blur-sm rounded-xl p-5 text-center border-2 border-success/50 shadow-sm hover: shadow-md hover:-translate-y-1 transition-all">
                                <p class="text-4xl font-black text-success mb-2">@Model.NamazAttendanceSummary.StudentsWithJamat</p>
                                <p class="text-xs text-neutral-600 font-bold">Students (Jamat)</p>
                            </div>
                            <div class="bg-white/80 backdrop-blur-sm rounded-xl p-5 text-center border-2 border-accent-500/50 shadow-sm hover: shadow-md hover:-translate-y-1 transition-all">
                                <p class="text-4xl font-black text-accent-600 mb-2">@Model.NamazAttendanceSummary.StudentsQaza</p>
                                <p class="text-xs text-neutral-600 font-bold">Students (Qaza)</p>
                            </div>
                            <div class="bg-white/80 backdrop-blur-sm rounded-xl p-5 text-center border-2 border-success/50 shadow-sm hover: shadow-md hover:-translate-y-1 transition-all">
                                <p class="text-4xl font-black text-success mb-2">@Model.NamazAttendanceSummary.EmployeesWithJamat</p>
                                <p class="text-xs text-neutral-600 font-bold">Employees (Jamat)</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Finance Tab -->
                <div id="finance-tab" class="tab-content hidden">
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
                        <!-- Revenue vs Expenses Chart -->
                        <div class="lg:col-span-2 backdrop-blur-md bg-gradient-to-br from-white/90 to-white/70 rounded-2xl p-6 border border-white/60 shadow-sms-md">
                            <h3 class="text-lg font-black text-primary-800 mb-5 flex items-center gap-2">
                                <div class="w-8 h-8 rounded-lg bg-gradient-to-br from-success to-success-dark flex items-center justify-center">
                                    <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path></svg>
                                </div>
                                Financial Overview
                            </h3>
                            <div class="bg-white/80 backdrop-blur-sm rounded-xl p-6 h-80 border border-primary-100/50 shadow-inner">
                                <canvas id="financeChart"></canvas>
                            </div>
                        </div>

                        <!-- Financial Summary -->
                        <div class="backdrop-blur-md bg-gradient-to-br from-white/90 to-white/70 rounded-2xl p-6 border border-white/60 shadow-sms-md">
                            <h3 class="text-lg font-black text-primary-800 mb-5">This Month</h3>
                            <div class="space-y-4">
                                <div class="bg-white/80 backdrop-blur-sm rounded-xl p-4 border-2 border-success/50 shadow-sm hover:shadow-md transition-all">
                                    <p class="text-xs text-neutral-600 mb-1 font-bold">Revenue (Actual)</p>
                                    <p class="text-2xl font-black text-success">@Model.FinancialSummary.MonthlyRevenueActual.ToString("C")</p>
                                </div>
                                <div class="bg-white/80 backdrop-blur-sm rounded-xl p-4 border-2 border-error/50 shadow-sm hover:shadow-md transition-all">
                                    <p class="text-xs text-neutral-600 mb-1 font-bold">Total Salaries</p>
                                    <p class="text-2xl font-black text-error">@Model.FinancialSummary.TotalSalariesPaid.ToString("C")</p>
                                </div>
                                <div class="bg-white/80 backdrop-blur-sm rounded-xl p-4 border-2 border-error/50 shadow-sm hover: shadow-md transition-all">
                                    <p class="text-xs text-neutral-600 mb-1 font-bold">Other Expenses</p>
                                    <p class="text-2xl font-black text-error">@Model.FinancialSummary.TotalExpenses.ToString("C")</p>
                                </div>
                                <div class="bg-gradient-accent rounded-xl p-5 border-2 border-accent-600/50 shadow-sms-gold">
                                    <p class="text-xs text-primary-900 mb-1 font-black uppercase tracking-wide">Net Profit/Loss</p>
                                    <p class="text-3xl font-black text-primary-900">@Model.FinancialSummary.ProfitLoss.ToString("C")</p>
                                </div>
                            </div>
                            <button onclick="navigateToSection('/BillingReports')" class="mt-5 w-full bg-gradient-primary hover:shadow-sms-lg text-white py-3 px-4 rounded-xl font-bold text-sm transition-all transform hover:scale-105 flex items-center justify-center gap-2">
                                View Full Report 
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M13 7l5 5m0 0l-5 5m5-5H6"></path></svg>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Academics Tab -->
                <div id="academics-tab" class="tab-content hidden">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <!-- Exam Performance -->
                        <div class="backdrop-blur-md bg-gradient-to-br from-white/90 to-white/70 rounded-2xl p-6 border border-white/60 shadow-sms-md">
                            <h3 class="text-lg font-black text-primary-800 mb-5 flex items-center gap-2">
                                <div class="w-8 h-8 rounded-lg bg-gradient-accent flex items-center justify-center">
                                    <svg class="w-4 h-4 text-primary-900" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
                                </div>
                                Exam Performance
                            </h3>
                            <div class="bg-white/80 backdrop-blur-sm rounded-xl p-6 h-72 border border-primary-100/50 shadow-inner">
                                <canvas id="examPerformanceChart"></canvas>
                            </div>
                            <div class="mt-5 grid grid-cols-3 gap-3">
                                <div class="bg-white/80 backdrop-blur-sm rounded-xl p-3 text-center border-2 border-success/50 shadow-sm hover: shadow-md transition-all">
                                    <p class="text-2xl font-black text-success">@Model.ExamSummary.PassedStudents</p>
                                    <p class="text-xs text-neutral-600 font-bold mt-1">Passed</p>
                                </div>
                                <div class="bg-white/80 backdrop-blur-sm rounded-xl p-3 text-center border-2 border-error/50 shadow-sm hover: shadow-md transition-all">
                                    <p class="text-2xl font-black text-error">@Model.ExamSummary.FailedStudents</p>
                                    <p class="text-xs text-neutral-600 font-bold mt-1">Failed</p>
                                </div>
                                <div class="bg-white/80 backdrop-blur-sm rounded-xl p-3 text-center border-2 border-info/50 shadow-sm hover: shadow-md transition-all">
                                    <p class="text-2xl font-black text-info">@Model.ExamSummary.AverageMarksPercentage%</p>
                                    <p class="text-xs text-neutral-600 font-bold mt-1">Average</p>
                                </div>
                            </div>
                            <button onclick="navigateToSection('/ExamReports')" class="mt-5 w-full bg-gradient-primary hover:shadow-sms-lg text-white py-3 px-4 rounded-xl font-bold text-sm transition-all transform hover:scale-105 flex items-center justify-center gap-2">
                                View Exam Reports 
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M13 7l5 5m0 0l-5 5m5-5H6"></path></svg>
                            </button>
                        </div>

                        <!-- Test Returns -->
                        <div class="backdrop-blur-md bg-gradient-to-br from-white/90 to-white/70 rounded-2xl p-6 border border-white/60 shadow-sms-md">
                            <h3 class="text-lg font-black text-primary-800 mb-5 flex items-center gap-2">
                                <div class="w-8 h-8 rounded-lg bg-gradient-to-br from-warning to-warning-dark flex items-center justify-center">
                                    <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path></svg>
                                </div>
                                Test Return Performance
                            </h3>
                            <div class="bg-white/80 backdrop-blur-sm rounded-xl p-6 h-72 border border-primary-100/50 shadow-inner">
                                <canvas id="testReturnsChart"></canvas>
                            </div>
                            <div class="mt-5 grid grid-cols-3 gap-3">
                                <div class="bg-white/80 backdrop-blur-sm rounded-xl p-3 text-center border-2 border-success/50 shadow-sm hover: shadow-md transition-all">
                                    <p class="text-2xl font-black text-success">@Model.TestReturnsSummary.TestsReturnedOnTime</p>
                                    <p class="text-xs text-neutral-600 font-bold mt-1">On Time</p>
                                </div>
                                <div class="bg-white/80 backdrop-blur-sm rounded-xl p-3 text-center border-2 border-warning/50 shadow-sm hover: shadow-md transition-all">
                                    <p class="text-2xl font-black text-warning">@Model.TestReturnsSummary.TestsReturnedLate</p>
                                    <p class="text-xs text-neutral-600 font-bold mt-1">Late</p>
                                </div>
                                <div class="bg-white/80 backdrop-blur-sm rounded-xl p-3 text-center border-2 border-error/50 shadow-sm hover:shadow-md transition-all">
                                    <p class="text-2xl font-black text-error">@Model.TestReturnsSummary.TestsPendingReturn</p>
                                    <p class="text-xs text-neutral-600 font-bold mt-1">Pending</p>
                                </div>
                            </div>
                            <button onclick="navigateToSection('/TestReturn')" class="mt-5 w-full bg-gradient-primary hover:shadow-sms-lg text-white py-3 px-4 rounded-xl font-bold text-sm transition-all transform hover:scale-105 flex items-center justify-center gap-2">
                                View Test Returns
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M13 7l5 5m0 0l-5 5m5-5H6"></path></svg>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Operations Tab -->
                <div id="operations-tab" class="tab-content hidden">
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <!-- Complaints -->
                        <div class="backdrop-blur-md bg-gradient-to-br from-white/90 to-white/70 rounded-2xl p-6 border border-white/60 shadow-sms-md cursor-pointer hover:shadow-sms-lg hover:-translate-y-1 transition-all duration-300" onclick="navigateToSection('/StudentComplaint')">
                            <div class="flex items-center justify-between mb-5">
                                <h3 class="text-lg font-black text-primary-800 flex items-center gap-2">
                                    <div class="w-8 h-8 rounded-lg bg-gradient-to-br from-error to-error-dark flex items-center justify-center">
                                        <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                        </svg>
                                    </div>
                                    Complaints
                                </h3>
                                <svg class="w-5 h-5 text-primary-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M9 5l7 7-7 7"></path></svg>
                            </div>
                            <div class="space-y-3">
                                <div class="bg-white/80 backdrop-blur-sm rounded-xl p-4 flex justify-between items-center border-2 border-error/50 shadow-sm hover: shadow-md transition-all">
                                    <span class="text-sm text-neutral-700 font-bold">Pending</span>
                                    <span class="text-2xl font-black text-error">@Model.ComplaintSummary.TotalPendingComplaints</span>
                                </div>
                                <div class="bg-white/80 backdrop-blur-sm rounded-xl p-4 flex justify-between items-center border-2 border-warning/50 shadow-sm hover: shadow-md transition-all">
                                    <span class="text-sm text-neutral-700 font-bold">Open</span>
                                    <span class="text-2xl font-black text-warning">@Model.ComplaintSummary.OpenComplaints</span>
                                </div>
                                <div class="bg-white/80 backdrop-blur-sm rounded-xl p-4 flex justify-between items-center border-2 border-accent-500/50 shadow-sm hover: shadow-md transition-all">
                                    <span class="text-sm text-neutral-700 font-bold">Investigation</span>
                                    <span class="text-2xl font-black text-accent-600">@Model.ComplaintSummary.InvestigationComplaints</span>
                                </div>
                                <div class="bg-white/80 backdrop-blur-sm rounded-xl p-4 flex justify-between items-center border-2 border-error/50 shadow-sm hover: shadow-md transition-all">
                                    <span class="text-sm text-neutral-700 font-bold">Escalated</span>
                                    <span class="text-2xl font-black text-error">@Model.ComplaintSummary.EscalatedComplaints</span>
                                </div>
                            </div>
                        </div>

                        <!-- Active Duties -->
                        <div class="backdrop-blur-md bg-gradient-to-br from-white/90 to-white/70 rounded-2xl p-6 border border-white/60 shadow-sms-md cursor-pointer hover:shadow-sms-lg hover:-translate-y-1 transition-all duration-300" onclick="navigateToSection('/AssignedDuties')">
                            <div class="flex items-center justify-between mb-5">
                                <h3 class="text-lg font-black text-primary-800 flex items-center gap-2">
                                    <div class="w-8 h-8 rounded-lg bg-gradient-to-br from-info to-info-dark flex items-center justify-center">
                                        <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path>
                                        </svg>
                                    </div>
                                    Active Duties
                                </h3>
                                <svg class="w-5 h-5 text-primary-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M9 5l7 7-7 7"></path></svg>
                            </div>
                            <div class="bg-gradient-to-br from-info/10 to-info/5 backdrop-blur-sm rounded-xl p-8 text-center mb-5 border-2 border-info/30 shadow-sm">
                                <p class="text-5xl font-black text-info mb-2">@Model.ActiveDuties.Count</p>
                                <p class="text-sm text-neutral-700 font-bold">Total Active Duties</p>
                            </div>
                            @if (Model.ActiveDuties.Any())
                            {
                                <div class="space-y-2 bg-white/60 backdrop-blur-sm rounded-xl p-4 max-h-48 overflow-y-auto custom-scrollbar border border-primary-100/50">
                                    @foreach (var duty in Model.ActiveDuties.Take(5))
                                    {
                                        <div class="text-xs text-primary-800 bg-white/80 backdrop-blur-sm rounded-lg p-3 border border-primary-200/50 hover:border-info/50 hover:shadow-sm transition-all">
                                            <span class="font-black">@duty.Employee.FullName</span> - <span class="font-medium">@duty.DutyTitle</span>
                                        </div>
                                    }
                                </div>
                            }
                        </div>

                        <!-- Inquiries -->
                        <div class="backdrop-blur-md bg-gradient-to-br from-white/90 to-white/70 rounded-2xl p-6 border border-white/60 shadow-sms-md">
                            <div class="flex items-center justify-between mb-5">
                                <h3 class="text-lg font-black text-primary-800 flex items-center gap-2">
                                    <div class="w-8 h-8 rounded-lg bg-gradient-to-br from-success to-success-dark flex items-center justify-center">
                                        <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                                        </svg>
                                    </div>
                                    Admissions
                                </h3>
                            </div>
                            <div class="space-y-4">
                                <div class="bg-white/80 backdrop-blur-sm rounded-xl p-4 flex justify-between items-center border-2 border-primary-300/50 shadow-sm hover: shadow-md transition-all">
                                    <span class="text-sm text-neutral-700 font-bold">Total Inquiries</span>
                                    <span class="text-2xl font-black text-primary-700">@Model.InquirySummary.TotalInquiries</span>
                                </div>
                                <div class="bg-white/80 backdrop-blur-sm rounded-xl p-4 flex justify-between items-center border-2 border-success/50 shadow-sm hover:shadow-md transition-all">
                                    <span class="text-sm text-neutral-700 font-bold">Admitted</span>
                                    <span class="text-2xl font-black text-success">@Model.InquirySummary.AdmissionsTaken</span>
                                </div>
                                <div class="bg-white/80 backdrop-blur-sm rounded-xl p-4 flex justify-between items-center border-2 border-warning/50 shadow-sm hover: shadow-md transition-all">
                                    <span class="text-sm text-neutral-700 font-bold">Pending</span>
                                    <span class="text-2xl font-black text-warning">@Model.InquirySummary.PendingInquiries</span>
                                </div>
                                <div class="bg-gradient-to-br from-success via-success to-success-dark rounded-xl p-5 border-2 border-success/50 shadow-md">
                                    <p class="text-xs text-white/90 mb-1 font-bold uppercase tracking-wide">Admission Rate</p>
                                    <p class="text-3xl font-black text-white">@Model.InquirySummary.AdmissionRate%</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script src="~/lib/chartjs/chart.min.js" asp-append-version="true"></script>
    <script>
        // Tab Switching
        function switchTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.add('hidden');
            });

            // Remove active class from all buttons
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('active', 'border-primary-600', 'text-primary-800');
                btn.classList.add('border-transparent', 'text-neutral-600');
            });

            // Show selected tab
            document.getElementById(tabName + '-tab').classList.remove('hidden');

            // Add active class to clicked button
            event.target.closest('.tab-button').classList.add('active', 'border-primary-600', 'text-primary-800');
            event.target.closest('.tab-button').classList.remove('border-transparent', 'text-neutral-600');
        }

        // Navigation function
        function navigateToSection(url) {
            window.location.href = url;
        }

        // Campus Selector
        @if (Model.IsOwnerDashboard)
        {
                    <text>
                    document.getElementById('campusSelector')?.addEventListener('change', function() {
                        const campusId = this.value;
                        const url = new URL(window.location.href);
                        if (campusId) {
                            url.searchParams.set('campusId', campusId);
                        } else {
                            url.searchParams.delete('campusId');
                        }
                        window.location.href = url.toString();
                    });
                    </text>
        }

        // Charts Configuration
        document.addEventListener('DOMContentLoaded', function() {
            // Global Chart.js Configuration
            Chart.defaults.font.family = "'Poppins', 'Inter', sans-serif";
            Chart.defaults.font.size = 13;
            Chart.defaults.color = '#5D3A1A';
            Chart.defaults.plugins.legend.labels.padding = 20;
            Chart.defaults.plugins.legend.labels.font = {
                size: 13,
                weight: '700'
            };

            // Student Attendance Chart
            const studentCtx = document.getElementById('studentAttendanceChart')?.getContext('2d');
            if (studentCtx) {
                const studentData = @Html.Raw(Json.Serialize(Model.AttendanceSummary.StudentAttendanceChart));
                new Chart(studentCtx, {
                    type:  'doughnut',
                    data:  {
                        labels: studentData.map(d => d.label),
                        datasets: [{
                            data: studentData.map(d => d.value),
                            backgroundColor: studentData.map(d => d.color),
                            borderWidth: 5,
                            borderColor: '#ffffff',
                            hoverBorderWidth: 7,
                            hoverOffset: 15
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins:  {
                            legend: {
                                position: 'bottom',
                                labels: {
                                    padding: 20,
                                    font: {
                                        size: 13,
                                        weight: 'bold'
                                    },
                                    usePointStyle:  true,
                                    pointStyle: 'circle'
                                }
                            },
                            tooltip: {
                                backgroundColor: 'rgba(0, 0, 0, 0.8)',
                                padding: 12,
                                titleFont: { size: 14, weight: 'bold' },
                                bodyFont: { size: 13 },
                                cornerRadius:  8,
                                displayColors: true,
                                boxPadding: 6
                            }
                        },
                        cutout: '70%',
                        animation: {
                            animateRotate: true,
                            animateScale: true,
                            duration: 1500,
                            easing: 'easeInOutQuart'
                        }
                    }
                });
            }

            // Teacher Attendance Chart
            const teacherCtx = document.getElementById('teacherAttendanceChart')?.getContext('2d');
            if (teacherCtx) {
                const teacherData = @Html.Raw(Json.Serialize(Model.AttendanceSummary.TeacherAttendanceChart));
                new Chart(teacherCtx, {
                    type: 'doughnut',
                    data: {
                        labels: teacherData.map(d => d.label),
                        datasets: [{
                            data: teacherData.map(d => d.value),
                            backgroundColor: teacherData.map(d => d.color),
                            borderWidth: 5,
                            borderColor: '#ffffff',
                            hoverBorderWidth: 7,
                            hoverOffset: 15
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom',
                                labels: {
                                    padding: 20,
                                    font: {
                                        size: 13,
                                        weight: 'bold'
                                    },
                                    usePointStyle: true,
                                    pointStyle: 'circle'
                                }
                            },
                            tooltip:  {
                                backgroundColor: 'rgba(0, 0, 0, 0.8)',
                                padding: 12,
                                titleFont: { size:  14, weight: 'bold' },
                                bodyFont:  { size: 13 },
                                cornerRadius: 8,
                                displayColors: true,
                                boxPadding:  6
                            }
                        },
                        cutout:  '70%',
                        animation: {
                            animateRotate: true,
                            animateScale: true,
                            duration: 1500,
                            easing: 'easeInOutQuart'
                        }
                    }
                });
            }

            // Finance Chart
            const financeCtx = document.getElementById('financeChart')?.getContext('2d');
            if (financeCtx) {
                new Chart(financeCtx, {
                    type: 'bar',
                    data: {
                        labels: ['Revenue', 'Salaries', 'Expenses', 'Profit/Loss'],
                        datasets: [{
                            label: 'Amount (PKR)',
                            data: [
                                @Model.FinancialSummary.MonthlyRevenueActual,
                                @Model.FinancialSummary.TotalSalariesPaid,
                                @Model.FinancialSummary.TotalExpenses,
                                Math.abs(@Model.FinancialSummary.ProfitLoss)
                            ],
                            backgroundColor: [
                                'rgba(46, 125, 50, 0.9)',
                                'rgba(198, 40, 40, 0.9)',
                                'rgba(198, 40, 40, 0.9)',
                                '@(Model.FinancialSummary.ProfitLoss >= 0 ? "rgba(46, 125, 50, 0.9)" : "rgba(198, 40, 40, 0.9)")'
                            ],
                            borderRadius: 12,
                            borderWidth: 0,
                            hoverBackgroundColor: [
                                'rgba(46, 125, 50, 1)',
                                'rgba(198, 40, 40, 1)',
                                'rgba(198, 40, 40, 1)',
                                '@(Model.FinancialSummary.ProfitLoss >= 0 ? "rgba(46, 125, 50, 1)" : "rgba(198, 40, 40, 1)")'
                            ],
                            barThickness: 60
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio:  false,
                        plugins: {
                            legend: { display: false },
                            tooltip:  {
                                backgroundColor: 'rgba(0, 0, 0, 0.8)',
                                padding: 12,
                                titleFont: { size: 14, weight: 'bold' },
                                bodyFont: { size: 13 },
                                cornerRadius: 8,
                                displayColors:  false
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero:  true,
                                grid: {
                                    color: 'rgba(232, 220, 200, 0.3)',
                                    drawBorder: false
                                },
                                ticks: {
                                    font: { size: 12, weight: '600' },
                                    padding: 10
                                }
                            },
                            x:  {
                                grid: { display: false },
                                ticks: {
                                    font:  { size: 12, weight:  '700' },
                                    padding:  10
                                }
                            }
                        },
                        animation: {
                            duration: 1500,
                            easing: 'easeInOutQuart'
                        }
                    }
                });
            }

            // Exam Performance Chart
            const examCtx = document.getElementById('examPerformanceChart')?.getContext('2d');
            if (examCtx) {
                new Chart(examCtx, {
                    type: 'pie',
                    data: {
                        labels: ['Passed', 'Failed'],
                        datasets: [{
                            data: [@Model.ExamSummary.PassedStudents, @Model.ExamSummary.FailedStudents],
                            backgroundColor: [
                                'rgba(46, 125, 50, 0.9)',
                                'rgba(198, 40, 40, 0.9)'
                            ],
                            borderWidth: 5,
                            borderColor: '#ffffff',
                            hoverBorderWidth: 7,
                            hoverOffset: 15,
                            hoverBackgroundColor: [
                                'rgba(46, 125, 50, 1)',
                                'rgba(198, 40, 40, 1)'
                            ]
                        }]
                    },
                    options: {
                        responsive:  true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom',
                                labels: {
                                    padding: 20,
                                    font: {
                                        size: 13,
                                        weight: 'bold'
                                    },
                                    usePointStyle: true,
                                    pointStyle: 'circle'
                                }
                            },
                            tooltip: {
                                backgroundColor: 'rgba(0, 0, 0, 0.8)',
                                padding: 12,
                                titleFont: { size: 14, weight: 'bold' },
                                bodyFont: { size: 13 },
                                cornerRadius: 8,
                                displayColors: true,
                                boxPadding: 6
                            }
                        },
                        animation: {
                            animateRotate: true,
                            animateScale: true,
                            duration: 1500,
                            easing: 'easeInOutQuart'
                        }
                    }
                });
            }

            // Test Returns Chart
            const testCtx = document.getElementById('testReturnsChart')?.getContext('2d');
            if (testCtx) {
                new Chart(testCtx, {
                    type: 'pie',
                    data: {
                        labels: ['On Time', 'Late', 'Pending'],
                        datasets: [{
                            data: [
                                @Model.TestReturnsSummary.TestsReturnedOnTime,
                                @Model.TestReturnsSummary.TestsReturnedLate,
                                @Model.TestReturnsSummary.TestsPendingReturn
                            ],
                            backgroundColor: [
                                'rgba(46, 125, 50, 0.9)',
                                'rgba(245, 124, 0, 0.9)',
                                'rgba(198, 40, 40, 0.9)'
                            ],
                            borderWidth: 5,
                            borderColor: '#ffffff',
                            hoverBorderWidth:  7,
                            hoverOffset: 15,
                            hoverBackgroundColor: [
                                'rgba(46, 125, 50, 1)',
                                'rgba(245, 124, 0, 1)',
                                'rgba(198, 40, 40, 1)'
                            ]
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom',
                                labels: {
                                    padding: 20,
                                    font: {
                                        size: 13,
                                        weight: 'bold'
                                    },
                                    usePointStyle: true,
                                    pointStyle:  'circle'
                                }
                            },
                            tooltip: {
                                backgroundColor: 'rgba(0, 0, 0, 0.8)',
                                padding: 12,
                                titleFont: { size: 14, weight: 'bold' },
                                bodyFont: { size: 13 },
                                cornerRadius: 8,
                                displayColors: true,
                                boxPadding: 6
                            }
                        },
                        animation:  {
                            animateRotate: true,
                            animateScale: true,
                            duration: 1500,
                            easing: 'easeInOutQuart'
                        }
                    }
                });
            }
        });
    </script>

    <style>
        /* Custom Scrollbar */
        .custom-scrollbar::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        .custom-scrollbar::-webkit-scrollbar-track {
            background: rgba(232, 220, 200, 0.3);
            border-radius: 10px;
        }

        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #8B4513 0%, #A0522D 100%);
            border-radius: 10px;
        }

            .custom-scrollbar::-webkit-scrollbar-thumb:hover {
                background: linear-gradient(135deg, #6B4423 0%, #8B4513 100%);
            }

        /* Hide scrollbar for tab navigation */
        .scrollbar-hide: :-webkit-scrollbar {
            display: none;
        }

        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        /* Enhanced animations */
        @@keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .tab-content {
            animation: fadeInUp 0.5s ease-out;
        }

        /* Gradient text */
        .bg-clip-text {
            -webkit-background-clip: text;
            background-clip: text;
        }
    </style>
}
