@model IEnumerable<UTS_SMS.Models.CertificateType>

@{
    ViewData["Title"] = "Certificate Settings";
}

<div class="min-h-screen p-4 md:p-6">
    <div class="max-w-7xl mx-auto">
        <!-- Header -->
        <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6">
            <div>
                <h1 class="text-3xl font-bold text-primary-800">Certificate Settings</h1>
                <p class="text-neutral-600 mt-2">Manage certificate types and pricing</p>
            </div>
            <div class="flex gap-2 mt-4 md:mt-0">
                <a asp-action="Create" class="bg-gradient-primary hover:shadow-sms-lg text-white px-4 py-2 rounded-lg transition-all duration-300 flex items-center shadow-sms-md">
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                    </svg>
                    Add Certificate Type
                </a>
            </div>
        </div>

        @if (TempData["SuccessMessage"] != null)
        {
            <div class="bg-success-light border-l-4 border-success text-success p-4 mb-6 rounded-lg animate-fade-in">
                @TempData["SuccessMessage"]
            </div>
        }

        @if (TempData["ErrorMessage"] != null)
        {
            <div class="bg-error-light border-l-4 border-error text-error p-4 mb-6 rounded-lg animate-fade-in">
                @TempData["ErrorMessage"]
            </div>
        }

        <!-- Certificate Types Table -->
        <div class="bg-white rounded-xl shadow-sms-md overflow-hidden">
            <div class="overflow-x-auto">
                <table class="min-w-full divide-y divide-neutral-200">
                    <thead class="bg-gradient-primary text-white">
                        <tr>
                            <th class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider">Certificate Name</th>
                            <th class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider">Price</th>
                            <th class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider">Report File</th>
                            <th class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider">Campus</th>
                            <th class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider">Created Date</th>
                            <th class="px-6 py-3 text-right text-xs font-medium uppercase tracking-wider">Actions</th>
                        </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-neutral-200">
                        @if (Model.Any())
                        {
                            @foreach (var item in Model)
                            {
                                <tr class="hover:bg-primary-50 transition-colors">
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="text-sm font-medium text-neutral-900">@item.CertificateName</div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="text-sm text-neutral-900">@item.Price.ToString("C")</div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="text-sm text-neutral-600">@item.ReportFileName</div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="text-sm text-neutral-600">@item.Campus?.Name</div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="text-sm text-neutral-600">@item.CreatedDate.ToString("dd-MM-yyyy")</div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                                        <div class="flex justify-end gap-2">
                                            <a asp-action="Edit" asp-route-id="@item.Id" 
                                               class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded transition-colors">
                                                <i class="fas fa-edit"></i> Edit
                                            </a>
                                            <form asp-action="Delete" asp-route-id="@item.Id" method="post" class="inline" 
                                                  onsubmit="return confirm('Are you sure you want to delete this certificate type?');">
                                                @Html.AntiForgeryToken()
                                                <button type="submit" class="bg-error hover:bg-red-700 text-white px-3 py-1 rounded transition-colors">
                                                    <i class="fas fa-trash"></i> Delete
                                                </button>
                                            </form>
                                        </div>
                                    </td>
                                </tr>
                            }
                        }
                        else
                        {
                            <tr>
                                <td colspan="6" class="px-6 py-4 text-center text-neutral-500">
                                    No certificate types found. Click "Add Certificate Type" to create one.
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Info Card -->
        <div class="mt-6 bg-blue-50 border-l-4 border-blue-500 p-4 rounded-lg">
            <div class="flex">
                <div class="flex-shrink-0">
                    <svg class="h-5 w-5 text-blue-500" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                    </svg>
                </div>
                <div class="ml-3">
                    <p class="text-sm text-blue-700">
                        <strong>Note:</strong> Make sure to upload the certificate template (.docx file) to the <code>wwwroot/reports</code> folder before creating a certificate type.
                        The report file name should match the uploaded file exactly (e.g., "LeavingCertificate.docx").
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>
